# Cursor AI Rules - Auto-loaded at conversation start

## ğŸ¯ MANDATORY: Read These Files First

**At the start of EVERY new conversation, you MUST:**

1. **Read INDEX.md** - Master file index showing where everything is located
2. **Read docs/AI_CODING_RULES.md** - Main coding rules and workflow requirements
3. **Read .cursor/coding_guru.md** - Learning file with best practices and patterns
4. **Read .cursor/commands/rules.md** - ComfyUI-specific rules (if working on ComfyUI)
5. **Read .cursor/spec.md** - Project specification and requirements

## ğŸ“š Key Learning Files Location

**Always reference these files when needed:**

### Rules & Workflow
- `docs/AI_CODING_RULES.md` - Main coding rules (MANDATORY to read first)
- `.cursor/commands/rules.md` - ComfyUI node development rules
- `docs/AI_TOOLS_README.md` - Documentation for all AI development tools

### Learning & Patterns
- `.cursor/coding_guru.md` - Knowledge bank with learned patterns and best practices
- `docs/CIVITAI_METADATA_FIX.md` - Metadata extraction fixes and learnings
- `docs/GURU_MANAGER_FIX_2024.md` - Recent fixes and solutions
- `docs/IMPROVEMENTS_SUMMARY.md` - Summary of all improvements

### Project Context
- `.cursor/spec.md` - Project specification and requirements
- `INDEX.md` - Complete file index (use this to find anything)
- `Readme.md` - Project overview and features

### Reference Data
- `data/coding_reference_js.json` - JavaScript patterns and APIs
- `data/coding_reference_python.json` - Python patterns and APIs
- `data/coding_reference_html5.json` - HTML5 patterns and APIs

## ğŸ”„ Workflow Requirements

**Before ANY coding task:**
1. âœ… Read INDEX.md to understand project structure
2. âœ… Read docs/AI_CODING_RULES.md for workflow rules
3. âœ… Check .cursor/coding_guru.md for relevant patterns
4. âœ… Research internet for best practices (MANDATORY)
5. âœ… Use tools for analysis before making changes
6. âœ… Create backup before editing files

**During development:**
- Consult coding references every 3-5 functions
- Update .cursor/coding_guru.md with new learnings
- Test after each significant change

**After development:**
- Run all tests
- Update documentation
- Commit learnings to coding_guru.md

## ğŸ› ï¸ Tools Available

**Analysis Tools:**
- `tools/ai_code_analyzer.py` - Analyze code structure
- `tools/ai_code_diff.py` - Compare before/after
- `tools/ai_pattern_matcher.py` - Find patterns
- `tools/ai_context_builder.py` - Build context

**Testing Tools:**
- `tools/test_guru_manager.py` - Validate HTML
- `tools/backup_file.py` - Create/restore backups

**Reference Tools:**
- `tools/load_coding_reference.py` - Search reference databases

## ğŸ“ File Locations Quick Reference

```
art/
â”œâ”€â”€ .cursor/
â”‚   â”œâ”€â”€ coding_guru.md          # Learning file (READ FIRST)
â”‚   â”œâ”€â”€ commands/rules.md        # ComfyUI rules
â”‚   â””â”€â”€ spec.md                  # Project spec
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ AI_CODING_RULES.md       # Main rules (READ FIRST)
â”‚   â”œâ”€â”€ AI_TOOLS_README.md       # Tools documentation
â”‚   â”œâ”€â”€ CIVITAI_METADATA_FIX.md  # Metadata fixes
â”‚   â””â”€â”€ GURU_MANAGER_FIX_2024.md # Recent fixes
â”œâ”€â”€ data/
â”‚   â””â”€â”€ coding_reference_*.json  # Reference databases
â”œâ”€â”€ tools/
â”‚   â””â”€â”€ *.py                     # AI development tools
â”œâ”€â”€ INDEX.md                     # Master index (READ FIRST)
â””â”€â”€ Readme.md                    # Project overview
```

## ğŸ”— Project Repository

**GitHub Repository:** https://github.com/revisionhiep-create/comfyui-history-guru

- **Use GitHub to restore originals** if needed
- **Check repository for latest versions** before making changes
- **Reference repository** for project structure and file locations

## ğŸ’¾ Backup System (MANDATORY)

**CRITICAL: Always create backups before making ANY changes to files.**

### Automatic Backup Rules:

1. **Before ANY file edit:**
   - Create a timestamped backup in `backup/` directory
   - Format: `{filename}_{YYYYMMDD}_{HHMMSS}.html` (or appropriate extension)
   - Example: `Guru Manager ChromeEdge Edition_20251219_143022.html`

2. **Maintain up to 10 revisions:**
   - Keep the 10 most recent backups for each file
   - Delete older backups automatically (keep only last 10)
   - This ensures easy restoration without cluttering the backup folder

3. **Backup locations:**
   - Main files: `backup/` directory
   - Use `tools/backup_file.py` script when available
   - Or create manual backups with timestamp format

4. **Restoration:**
   - Use backup files from `backup/` directory
   - Or fetch originals from GitHub repository
   - Always verify backup before restoring

### Backup Script Usage:
```bash
python tools/backup_file.py "Guru Manager ChromeEdge Edition.html"
```

## âš ï¸ Critical Rules

1. **Always read INDEX.md first** - It shows where everything is
2. **Always read AI_CODING_RULES.md** - Contains mandatory workflow requirements
3. **Always check coding_guru.md** - Contains learned patterns and solutions
4. **Always research first** - Internet search is MANDATORY before coding
5. **Always use tools** - Analysis and testing tools are MANDATORY
6. **Always backup** - Create timestamped backup before ANY file changes (maintain last 10 revisions)
7. **Always update learning files** - Document new patterns in coding_guru.md
8. **Check GitHub** - Use repository to restore originals or verify current state

## ğŸ“ Knowledge Growth

**When you learn something new:**
- Update `.cursor/coding_guru.md` with the pattern/solution
- Categorize by language (.py, .js, .html)
- Include context and examples
- Reference the problem it solved

**This ensures future conversations benefit from past learnings.**

