# Standard Trigger Words Loader ğŸ“

A powerful ComfyUI custom node for managing trigger words with 50+ editable presets optimized for SDXL Illustrious models.

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![ComfyUI](https://img.shields.io/badge/ComfyUI-Custom%20Node-green)
![License](https://img.shields.io/badge/license-MIT-orange)

## ğŸŒŸ Features

- **50+ Preset Trigger Words** - Curated for SDXL Illustrious models
- **7 Categories** - Quality, Lighting, Composition, Style, Detail, Aesthetic, Motion
- **Toggle On/Off** - Click any tag to enable/disable
- **Inline Editing** - Double-click to edit tag text
- **Strength Control** - Adjust emphasis with mouse wheel
- **4 Output Modes** - Append, Prepend, Replace, Tagged Only
- **Smart Merging** - Combine with external trigger words (Lora Loader compatible)
- **Batch Operations** - Toggle all, clear all buttons
- **Auto-Deduplication** - Remove duplicate tags automatically
- **Visual Highlighting** - External tags are highlighted

## ğŸ“¦ Installation

### Method 1: ComfyUI Manager (Recommended)
1. Open ComfyUI Manager
2. Search for "Standard Trigger Words Loader"
3. Click Install
4. Restart ComfyUI

### Method 2: Manual Installation
1. Navigate to your ComfyUI custom nodes folder:
   ```bash
   cd ComfyUI/custom_nodes/
   ```

2. Clone this repository:
   ```bash
   git clone https://github.com/yourusername/Standard_trigger_words_loader.git
   ```

3. Restart ComfyUI

### Method 3: Direct Download
1. Download the repository as ZIP
2. Extract to `ComfyUI/custom_nodes/Standard_trigger_words_loader/`
3. Restart ComfyUI

## ğŸš€ Quick Start

### Basic Usage

1. **Add the Node**
   - In ComfyUI, search for: `Standard Trigger Words` or `ğŸ“`
   - Node will appear in category: `trigger_words`

2. **Select Category**
   - Choose from dropdown: Quality, Lighting, Composition, Style, Detail, Aesthetic, Motion, or All

3. **Toggle Tags**
   - Click tags to toggle on (green) or off (gray)
   - Active tags are included in output

4. **Connect Output**
   - Connect `output_string` to your CLIP Text Encode node

### Example Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Standard Trigger Words ğŸ“   â”‚
â”‚ Category: Quality           â”‚
â”‚ Mode: Append                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â” â”‚
â”‚ â”‚masterpieceâ”‚best qualityâ”‚8Kâ”‚ â”‚ â† Click to toggle
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ output_string
               â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ CLIP Text Encode    â”‚
     â”‚ Positive Prompt     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“– Node Parameters

### Required Parameters

| Parameter | Options | Default | Description |
|-----------|---------|---------|-------------|
| **preset_category** | All, Quality, Lighting, Composition, Style, Detail, Aesthetic, Motion | All | Category of presets to load |
| **mode** | Append, Prepend, Replace, Tagged Only | Append | How to combine tags with input text |
| **separator** | STRING | ", " | Character(s) between tags |
| **merge_strategy** | Keep Both, Prefer Preset, Prefer Incoming | Keep Both | Handle duplicate tags from external inputs |
| **deduplicate** | BOOLEAN | True | Remove duplicate tags |
| **default_active** | BOOLEAN | True | Default state for new tags |
| **allow_strength_adjustment** | BOOLEAN | False | Enable (tag:1.2) strength format |

### Optional Inputs

| Input | Type | Description |
|-------|------|-------------|
| **input_string** | STRING | Text to combine with trigger words |
| **trigger_words** | STRING | Connect from Lora Loader or other nodes |

### Outputs

| Output | Type | Description |
|--------|------|-------------|
| **output_string** | STRING | Final combined text with active trigger words |
| **active_triggers** | STRING | List of only the active trigger words |

## ğŸ¨ Preset Categories

### Quality Tags (13)
Essential quality modifiers for high-quality outputs
```
masterpiece, best quality, very aesthetic, absurdres, high quality, 
ultra high definition, extremely high detail, newest, year 2024, 
year 2025, highres, 8K, HDR
```

### Lighting Tags (14)
Control lighting and atmosphere
```
volumetric lighting, ambient occlusion, dramatic lighting, 
cinematic lighting, rim light, soft lighting, studio lighting, 
golden hour lighting, natural lighting, sunlight, backlighting, 
sharp focus, glowing, luminescent background
```

### Composition Tags (17)
Camera angles and framing
```
dynamic angle, dynamic pose, low-angle shot, low angle, 
looking at viewer, from above, from below, upper body focus, 
full body, portrait, close-up shot, mid shot, cowboy shot, 
wide angle, cinematic field of view, perfect composition, 
rule of thirds
```

### Style Tags (10)
Art style and technique
```
anime illustration, semi-realistic anime illustration, 
digital painting, cel shading, clean linework, 
manga style lineart, detailed, highly detailed, 
intricate details, painterly
```

### Detail Tags (9)
Fine detail enhancements
```
detailed eyes, beautiful eye details, detailed skin features, 
floating hair, flowing hair, intricate details, 
excellent depth of field, reflections, glossy
```

### Aesthetic Tags (11)
Overall visual quality
```
eye-catching, beautiful, vivid colors, bright colors, vibrant, 
high contrast, extreme contrast, balanced colors, atmospheric, 
depth of field, atmospheric perspective
```

### Motion Tags (6)
Dynamic elements
```
dynamic movement, motion lines, foreshortening, wind, 
floating, flowing
```

## ğŸ’¡ Usage Examples

### Example 1: Basic Quality Enhancement

**Setup:**
```
Input String: "a beautiful anime girl"
Category: Quality
Mode: Append
Active Tags: masterpiece, best quality, 8K
```

**Output:**
```
a beautiful anime girl, masterpiece, best quality, 8K
```

### Example 2: Lighting Focus

**Setup:**
```
Input String: "cyberpunk cityscape at night"
Category: Lighting
Mode: Prepend
Active Tags: volumetric lighting, cinematic lighting, neon glow
```

**Output:**
```
volumetric lighting, cinematic lighting, neon glow, cyberpunk cityscape at night
```

### Example 3: Tagged Only Mode

**Setup:**
```
Input String: (ignored)
Category: All
Mode: Tagged Only
Active Tags: masterpiece, detailed, dynamic pose
```

**Output:**
```
masterpiece, detailed, dynamic pose
```

### Example 4: With Lora Integration

**Workflow:**
```
Lora Loader â†’ trigger_words: "1girl, school uniform"
             â†“
Standard Trigger Words (Category: Quality)
             â†“
Output: "masterpiece, best quality, 1girl, school uniform, detailed eyes"
```

## ğŸ® UI Controls

### Tag Interactions
- **Single Click**: Toggle tag on/off (green = on, gray = off)
- **Double Click**: Edit tag text (inline editing)
- **Mouse Wheel**: Adjust strength (if enabled, e.g., tag:1.2)
- **Drag**: Reorder tags (future feature)

### Buttons
- **Toggle All ON**: Activate all tags
- **Toggle All OFF**: Deactivate all tags
- **Clear All**: Remove all tags

## âš™ï¸ Advanced Usage

### Output Modes Explained

1. **Append Mode**
   - Adds tags after input text
   - Format: `input_text, tag1, tag2`
   - Use for: Adding quality tags to existing prompts

2. **Prepend Mode**
   - Adds tags before input text
   - Format: `tag1, tag2, input_text`
   - Use for: Emphasizing tags at prompt start

3. **Replace Mode**
   - Uses only tags, ignores input
   - Format: `tag1, tag2`
   - Use for: Building prompts from scratch

4. **Tagged Only Mode**
   - Same as Replace
   - Format: `tag1, tag2`
   - Use for: Pure tag management

### Merge Strategies

When external trigger words arrive (e.g., from Lora Loader):

- **Keep Both**: Shows both versions (recommended for comparison)
- **Prefer Preset**: Keeps your curated presets, discards external duplicates
- **Prefer Incoming**: Trusts external source, replaces preset duplicates

### Strength Adjustment

When `allow_strength_adjustment` is enabled:

```python
# Enable in node settings
allow_strength_adjustment = True

# Tags appear as:
(masterpiece:1.2)  # Emphasized
(detailed:0.8)     # De-emphasized

# Recommended ranges:
# 0.8-0.9  = Subtle
# 1.0      = Normal
# 1.1-1.3  = Emphasized
# 1.4-2.0  = Strong (use sparingly)
```

## ğŸ”§ Customization

### Adding Custom Presets

Edit `standard_trigger_presets.py`:

```python
# Add your own category
CUSTOM_TAGS = [
    "your_custom_tag_1",
    "your_custom_tag_2",
    "your_custom_tag_3",
]

# Add to ALL_CATEGORIES
ALL_CATEGORIES = {
    "Quality": QUALITY_TAGS,
    "Custom": CUSTOM_TAGS,  # Your new category
    # ... other categories
}
```

### Editing Existing Presets

1. Open `standard_trigger_presets.py`
2. Find the category (e.g., `QUALITY_TAGS`)
3. Add/remove/edit tags in the list
4. Save and restart ComfyUI

## ğŸ› Troubleshooting

### Tags Not Appearing
- **Solution**: Click "Toggle All ON" button or change `default_active` to True

### Node Not Found in Search
- **Solution**: Search for "Standard Trigger Words" or "ğŸ“" emoji
- **Check**: Node appears in `trigger_words` category

### Output String Empty
- **Check**: Are any tags active (green)?
- **Check**: Is mode set correctly?
- **Check**: Is separator configured?

### External Trigger Words Not Merging
- **Check**: Is `trigger_words` input connected?
- **Check**: Verify merge strategy setting
- **Solution**: Try "Keep Both" to see all tags

### Duplicates in Output
- **Solution**: Enable `deduplicate` option
- **Check**: Verify merge strategy (use "Prefer Preset" or "Prefer Incoming")

## ğŸ“Š Performance

- **Tag Loading**: O(N) - Linear time
- **Tag Merging**: O(N+M) - Optimized algorithm
- **Memory Usage**: ~1-2KB per 100 tags
- **Recommended**: Up to 500 tags per node

**Optimizations:**
- Pre-compiled regex patterns
- Cached settings lookups
- Singleton event listeners
- Efficient string building

## ğŸ”„ Version History

### v1.0.0 (December 2024)
- Initial release
- 50+ SDXL Illustrious preset trigger words
- 7 preset categories
- Toggle on/off functionality
- Inline text editing
- Strength adjustment support
- 4 output modes
- Smart merging with external trigger words
- Batch operations
- Auto-deduplication
- Performance optimizations

## ğŸ¤ Contributing

Contributions are welcome! Here's how:

1. **Report Bugs**: Open an issue with details
2. **Suggest Features**: Describe your idea in issues
3. **Add Presets**: Submit PR with new trigger words
4. **Improve Code**: Fork, edit, submit PR

### Adding New Presets

1. Fork the repository
2. Edit `standard_trigger_presets.py`
3. Add tags to appropriate category
4. Test in ComfyUI
5. Submit PR with description

## ğŸ“„ License

MIT License - See LICENSE file for details

## ğŸ™ Credits

- **Preset Research**: Based on SDXL Illustrious community best practices
- **Inspired By**: ComfyUI Lora Manager's trigger word functionality
- **Built For**: ComfyUI community

## ğŸ“ Support

- **Issues**: [GitHub Issues](https://github.com/yourusername/Standard_trigger_words_loader/issues)
- **Discussions**: [GitHub Discussions](https://github.com/yourusername/Standard_trigger_words_loader/discussions)
- **Updates**: Watch repository for new releases

## ğŸ”— Related Projects

- [ComfyUI](https://github.com/comfyanonymous/ComfyUI) - The main application
- [ComfyUI Manager](https://github.com/ltdrdata/ComfyUI-Manager) - Node manager

---

**Made with â¤ï¸ for the ComfyUI community**

**â­ Star this repository if you find it useful!**
