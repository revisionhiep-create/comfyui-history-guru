{
  "file_operations": {
    "description": "Python file and directory operations",
    "modules": {
      "pathlib": {
        "description": "Modern path handling (preferred over os.path)",
        "patterns": {
          "create_path": "from pathlib import Path; p = Path('folder/file.txt')",
          "exists": "if p.exists(): ...",
          "is_file": "if p.is_file(): ...",
          "is_dir": "if p.is_dir(): ...",
          "read_text": "content = p.read_text(encoding='utf-8')",
          "write_text": "p.write_text(content, encoding='utf-8')",
          "read_bytes": "data = p.read_bytes()",
          "write_bytes": "p.write_bytes(data)",
          "glob": "for file in Path('dir').glob('*.png'): ...",
          "rglob": "for file in Path('dir').rglob('*.png'): ...",
          "parent": "parent = p.parent",
          "name": "name = p.name",
          "stem": "name_without_ext = p.stem",
          "suffix": "extension = p.suffix"
        }
      },
      "os": {
        "description": "OS-level operations",
        "patterns": {
          "listdir": "import os; files = os.listdir('path')",
          "walk": "for root, dirs, files in os.walk('path'): ...",
          "getsize": "size = os.path.getsize('file.txt')",
          "getmtime": "mtime = os.path.getmtime('file.txt')",
          "remove": "os.remove('file.txt')",
          "rmdir": "os.rmdir('dir')",
          "makedirs": "os.makedirs('path', exist_ok=True)"
        }
      }
    }
  },
  "image_metadata": {
    "description": "Extracting metadata from images (PNG, JPEG, etc.)",
    "libraries": {
      "PIL_Pillow": {
        "description": "Python Imaging Library for image processing",
        "patterns": {
          "open_image": "from PIL import Image; img = Image.open('image.png')",
          "get_format": "format = img.format",
          "get_size": "width, height = img.size",
          "get_metadata": "metadata = img.info",
          "extract_text_chunks": "if 'parameters' in img.info: params = img.info['parameters']",
          "close": "img.close()",
          "context_manager": "with Image.open('image.png') as img: metadata = img.info"
        }
      },
      "exifread": {
        "description": "EXIF data extraction",
        "patterns": {
          "read_exif": "import exifread; f = open('image.jpg', 'rb'); tags = exifread.process_file(f)"
        }
      }
    },
    "png_chunks": {
      "description": "PNG chunk extraction patterns",
      "chunks": {
        "tEXt": "Uncompressed text chunk",
        "iTXt": "International text chunk (UTF-8)",
        "zTXt": "Compressed text chunk",
        "parameters": "ComfyUI/A1111 parameters",
        "workflow": "ComfyUI workflow JSON"
      },
      "patterns": {
        "extract_with_pillow": "with Image.open('image.png') as img: if 'parameters' in img.info: params = img.info['parameters']",
        "extract_with_bytes": "Read PNG file as bytes, parse chunks manually for more control"
      }
    }
  },
  "json_operations": {
    "description": "JSON parsing and serialization",
    "patterns": {
      "load": "import json; data = json.load(open('file.json'))",
      "loads": "data = json.loads(json_string)",
      "dump": "json.dump(data, open('file.json', 'w'), indent=2)",
      "dumps": "json_string = json.dumps(data, indent=2)",
      "with_statement": "with open('file.json') as f: data = json.load(f)"
    }
  },
  "async_operations": {
    "description": "Async file operations",
    "libraries": {
      "aiofiles": {
        "description": "Async file I/O",
        "patterns": {
          "read": "import aiofiles; async with aiofiles.open('file.txt') as f: content = await f.read()",
          "write": "async with aiofiles.open('file.txt', 'w') as f: await f.write(content)",
          "read_bytes": "async with aiofiles.open('file.png', 'rb') as f: data = await f.read()"
        }
      }
    }
  },
  "file_monitoring": {
    "description": "File system monitoring libraries",
    "libraries": {
      "watchdog": {
        "description": "Cross-platform file monitoring",
        "patterns": {
          "basic": "from watchdog.observers import Observer; from watchdog.events import FileSystemEventHandler; class Handler(FileSystemEventHandler): def on_created(self, event): ...; observer = Observer(); observer.schedule(Handler(), 'path', recursive=True); observer.start()"
        }
      },
      "watchfiles": {
        "description": "High-performance async monitoring",
        "patterns": {
          "async": "from watchfiles import awatch; async for changes in awatch('path'): for change_type, file_path in changes: ..."
        }
      }
    }
  },
  "error_handling": {
    "description": "Error handling patterns",
    "patterns": {
      "try_except": "try: operation() except Exception as e: logger.error(f'Error: {e}')",
      "specific_exceptions": "try: operation() except FileNotFoundError: ... except PermissionError: ...",
      "context_manager": "try: with open('file') as f: ... except IOError as e: ..."
    }
  },
  "logging": {
    "description": "Logging patterns",
    "patterns": {
      "basic": "import logging; logging.basicConfig(level=logging.INFO); logging.info('Message')",
      "structured": "import structlog; logger = structlog.get_logger(); logger.info('event', key='value')"
    }
  }
}
